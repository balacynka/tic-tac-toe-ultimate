(()=>{"use strict";var i={842:(i,t,e)=>{e.d(t,{Q:()=>n});class n{actionGrid=document.getElementById("action-grid");animationGrid=document.getElementById("animation-grid");animationDuration=300;constructor(){}async animate(i,t){const e=i.getBoundingClientRect(),n=t.getBoundingClientRect();return this.copyGridElements(i,this.animationGrid),this.setAnimationGridPosition(e),this.setAnimationGridClassName(i),this.animationGrid.classList.remove("_hide"),i.classList.add("_hide"),this.animationGrid.offsetHeight,this.animationGrid.style.transitionDuration=`${this.animationDuration}ms`,this.setAnimationGridPosition(n),this.setAnimationGridClassName(t),new Promise((i=>{setTimeout(function(){this.copyGridElements(this.animationGrid,t),this.animationGrid.style.transitionDuration="",this.animationGrid.classList.add("_hide"),t.classList.remove("_hide"),i()}.bind(this),this.animationDuration)}))}processWithoutAnimation(i,t){this.copyGridElements(i,t),i.classList.add("_hide"),t.classList.remove("_hide")}copyGridElements(i,t){for(let e=0;e<9;e++){const n=i.childNodes[e],s=undefined;t.childNodes[e].innerHTML=n.innerHTML}}setAnimationGridPosition(i){const t=this.animationGrid;t.style.left=window.scrollX+i.x+"px",t.style.top=window.scrollY+i.y+"px"}setAnimationGridClassName(i){i.classList.contains("grid_small")?this.animationGrid.className="main__grid grid grid_small":this.animationGrid.className="main__grid grid grid_big"}}setTimeout((()=>{const i=new n,t=document.getElementById("super-grid").querySelectorAll(".grid")[2]}),200)},768:()=>{function i(t){const e=+(t.dataset.subgridsCount??0);for(let n=0;n<9;n++){const n=document.createElement("div");if(n.className="grid__tile",e>0){const t=document.createElement("div");t.className="grid__subgrid grid grid_small",t.dataset.subgridsCount=e-1+"",n.appendChild(t),i(t)}t.appendChild(n)}}for(let t of document.querySelectorAll(".grid"))i(t)},205:(i,t,e)=>{var n=e(842);class s{actionGrid=document.getElementById("action-grid");animationGrid=document.getElementById("animation-grid");superGrid=document.getElementById("super-grid");turnElement=document.querySelector(".main__turn-icon");gridsElements=this.superGrid.querySelectorAll(".grid");animations=new n.Q;turn="crossmark";grids=Array.from({length:9},(()=>Array(9).fill(null)));currentGridIndex=NaN;answerGridIndex=NaN;blockActionTiles=!1;blockSuperGridTiles=!1;constructor(){r(this),o(this)}rotateTurn(){this.turn=this.getOppositeTurn(this.turn),this.turnElement.className=`main__turn-icon grid__${this.turn}`}getOppositeTurn(i){return"crossmark"===i?"circle":"crossmark"}setTileMark(i,t){const e=document.createElement("div");e.className=`grid__${t??this.turn}`,i.append(e),setTimeout((()=>e.style.animationName="none"),100)}checkWinner(i=!1){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],e=i?this.grids:this.grids[this.currentGridIndex];if(!(e instanceof Array))return e;let n=!1;for(let s of t){const t=e[s[0]],r=e[s[1]],o=e[s[2]];if(t instanceof Array||r instanceof Array||o instanceof Array)n=!0;else if(![t,r,o].includes(null)||i){if(t===r&&r==o&&null!==t)return t}else n=!0}return n?void 0:null}async changeGrid(i,t=!1,e){if(i===this.currentGridIndex&&void 0===e)return;const n=this.gridsElements[this.currentGridIndex],s=this.gridsElements[i];if(t){if(await this.animations.animate(this.actionGrid,n),void 0!==e){this.grids[this.currentGridIndex]=e;const i=n.parentElement;i.classList.add("grid__tile_solved"),null!==e&&this.setTileMark(i,e);const t=this.checkWinner(!0);if(this.processGlobalWinner(t),null!=t)return this.rotateTurn()}if(!(this.grids[i]instanceof Array))return this.currentGridIndex=NaN,void(this.answerGridIndex=NaN);await this.animations.animate(s,this.actionGrid),this.answerGridIndex=i}else void 0!==n&&n.classList.remove("_hide"),this.animations.processWithoutAnimation(s,this.actionGrid);this.currentGridIndex=i}processGlobalWinner(i){if(void 0===i)return;if(this.superGrid.parentElement.classList.add("grid__tile_solved"),this.blockActionTiles=!0,this.blockSuperGridTiles=!0,null===i){const t=this.grids.filter((i=>"circle"===i)).length,e=this.grids.filter((i=>"crossmark"===i)).length;if(t===e)return;i=t>e?"circle":"crossmark"}const t=document.createElement("div");t.className=`grid__${i} grid__${i}_winner`,document.querySelector("main").appendChild(t)}}function r(i){for(let t=0;t<i.actionGrid.childNodes.length;t++){const e=i.actionGrid.childNodes[t];e.onmousedown=function(){if(this.hasChildNodes()||i.actionGrid.classList.contains("_hide")||i.blockActionTiles)return;i.blockActionTiles=!0;const e=undefined;i.grids[i.currentGridIndex][t]=i.turn,i.setTileMark(this),i.rotateTurn(),setTimeout((async()=>{await i.changeGrid(t,!0,i.checkWinner()),i.blockActionTiles=!1}),300)}.bind(e)}}function o(i){for(let t=0;t<i.superGrid.childNodes.length;t++){const e=i.superGrid.childNodes[t];e.onmousedown=function(){i.blockActionTiles||!isNaN(i.answerGridIndex)||this.className.includes("solved")||i.changeGrid(t)}.bind(e)}}const a=new s}},t={};function e(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return i[n](r,r.exports,e),r.exports}e.d=(i,t)=>{for(var n in t)e.o(t,n)&&!e.o(i,n)&&Object.defineProperty(i,n,{enumerable:!0,get:t[n]})},e.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t),e(842),e(768);var n=e(205)})();